<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Experiment Timer</title>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      transition: background-color 0.5s, color 0.5s;
    }
    .size-6 {
      width: 6rem;
      height: 6rem;
    }
    .radial-progress {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="navbar bg-base-100">
    <div class="flex-none">
      <button class="btn btn-square btn-ghost" onclick="toggleMenu()">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          class="inline-block h-5 w-5 stroke-current">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
    <div class="flex-1">
      <a class="btn btn-ghost text-xl" id="pageTitle">Current Experiment</a>
    </div>
    <div class="flex-none">
      <label class="flex cursor-pointer gap-2">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round">
          <circle cx="12" cy="12" r="5" />
          <path
            d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
        </svg>
        <input type="checkbox" value="synthwave" class="toggle theme-controller" id="themeToggle" />
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </label>
    </div>
  </div>

  <div id="menu" class="menu menu-lg bg-base-200 rounded-box w-56 hidden">
    <li><a onclick="showPage('currentExperiment')">Current Experiment</a></li>
    <li><a onclick="showPage('pastExperiments')">Past Experiments</a></li>
  </div>

  <div id="currentExperiment" class="min-h-screen flex">
    <div class="flex-1 flex justify-center items-center">
      <div id="radialProgress" class="radial-progress" style="--value:100; --size:12rem; --thickness: 2rem; display: none;" role="progressbar">
        <span id="progressText">100%</span>
      </div>
      <svg id="initialIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6" style="display: block;">
        <path fill-rule="evenodd" d="M10.5 3.798v5.02a3 3 0 0 1-.879 2.121l-2.377 2.377a9.845 9.845 0 0 1 5.091 1.013 8.315 8.315 0 0 0 5.713.636l.285-.071-3.954-3.955a3 3 0 0 1-.879-2.121v-5.02a23.614 23.614 0 0 0-3 0Zm4.5.138a.75.75 0 0 0 .093-1.495A24.837 24.837 0 0 0 12 2.25a25.048 25.048 0 0 0-3.093.191A.75.75 0 0 0 9 3.936v4.882a1.5 1.5 0 0 1-.44 1.06l-6.293 6.294c-1.62 1.621-.903 4.475 1.471 4.88 2.686.46 5.447.698 8.262.698 2.816 0 5.576-.239 8.262-.697 2.373-.406 3.092-3.26 1.47-4.881L15.44 9.879A1.5 1.5 0 0 1 15 8.818V3.936Z" clip-rule="evenodd" />
      </svg>
      <svg id="completedIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6" style="display: none;">
        <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z" clip-rule="evenodd" />
      </svg>
    </div>
    <div class="flex-1 flex flex-col justify-center items-center text-center">
      <h1 class="text-4xl mb-4">Experiment Timer</h1>
      <div class="flex justify-center gap-2 mb-4">
        <input type="number" id="inputDays" class="input input-bordered w-24" placeholder="Days" min="0" />
        <input type="number" id="inputHours" class="input input-bordered w-24" placeholder="Hours" min="0" max="23" />
        <input type="number" id="inputMinutes" class="input input-bordered w-24" placeholder="Minutes" min="0" max="59" />
        <input type="number" id="inputSeconds" class="input input-bordered w-24" placeholder="Seconds" min="0" max="59" />
      </div>
      <div id="timer" class="text-6xl mb-4">00:00:00:00</div>
      <div class="flex justify-center gap-4">
        <button id="startBtn" class="btn btn-primary">Start</button>
        <button id="pauseBtn" class="btn btn-secondary">Pause</button>
        <button id="resetBtn" class="btn btn-accent">Reset</button>
      </div>
    </div>
  </div>

  <div id="pastExperiments" class="min-h-screen flex hidden">
    <div class="flex-1 flex flex-col justify-center items-center text-center">
      <h1 class="text-4xl mb-4">Past Experiments</h1>
      <table class="table-auto w-full">
        <thead>
          <tr>
            <th class="px-4 py-2">Experiment ID</th>
            <th class="px-4 py-2">Date</th>
            <th class="px-4 py-2">Duration</th>
            <th class="px-4 py-2">Status</th>
          </tr>
        </thead>
        <tbody>
          <!-- Example Data -->
          <tr>
            <td class="border px-4 py-2">1</td>
            <td class="border px-4 py-2">2024-07-01</td>
            <td class="border px-4 py-2">02:30:00</td>
            <td class="border px-4 py-2">Completed</td>
          </tr>
          <!-- More rows as needed -->
        </tbody>
      </table>
    </div>
  </div>

  <div id="alert" class="alert alert-success fixed bottom-4 left-1/2 transform -translate-x-1/2 shadow-lg" style="display: none; width: 90vw; height: 15vh;">
    <div class="flex items-center justify-between h-full">
      <div class="flex items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 shrink-0 stroke-current"
          fill="none"
          viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span class="ml-2">Experiment complete. Remove Samples</span>
      </div>
      <button class="btn btn-sm" onclick="dismissAlert()">Confirm</button>
    </div>
  </div>

  <script>
    let timerInterval;
    let totalSeconds;
    let isRunning = false;
    let initialTotalSeconds;

    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');
    const timerDisplay = document.getElementById('timer');
    const inputDays = document.getElementById('inputDays');
    const inputHours = document.getElementById('inputHours');
    const inputMinutes = document.getElementById('inputMinutes');
    const inputSeconds = document.getElementById('inputSeconds');
    const alertBox = document.getElementById('alert');
    const radialProgress = document.getElementById('radialProgress');
    const progressText = document.getElementById('progressText');
    const initialIcon = document.getElementById('initialIcon');
    const completedIcon = document.getElementById('completedIcon');
    const pageTitle = document.getElementById('pageTitle');

    function updateTimerDisplay() {
      const days = String(Math.floor(totalSeconds / 86400)).padStart(2, '0');
      const hours = String(Math.floor((totalSeconds % 86400) / 3600)).padStart(2, '0');
      const minutes = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
      const seconds = String(totalSeconds % 60).padStart(2, '0');
      timerDisplay.textContent = `${days}:${hours}:${minutes}:${seconds}`;
      
      const progress = Math.floor((totalSeconds / initialTotalSeconds) * 100);
      radialProgress.style.setProperty('--value', progress);
      progressText.textContent = `${progress}%`;
    }

    function showAlert() {
      alertBox.style.display = 'block';
    }

    function dismissAlert() {
      alertBox.style.display = 'none';
    }

    function startTimer() {
      if (!isRunning) {
        isRunning = true;
        radialProgress.style.display = 'flex';
        initialIcon.style.display = 'none';
        completedIcon.style.display = 'none';
        timerInterval = setInterval(() => {
          if (totalSeconds > 0) {
            totalSeconds--;
            updateTimerDisplay();
          } else {
            clearInterval(timerInterval);
            showAlert();
            radialProgress.style.display = 'none';
            completedIcon.style.display = 'block';
          }
        }, 1000);
      }
    }

    function pauseTimer() {
      if (isRunning) {
        isRunning = false;
        clearInterval(timerInterval);
      }
    }

    function resetTimer() {
      isRunning = false;
      clearInterval(timerInterval);
      const days = parseInt(inputDays.value) || 0;
      const hours = parseInt(inputHours.value) || 0;
      const minutes = parseInt(inputMinutes.value) || 0;
      const seconds = parseInt(inputSeconds.value) || 0;
      totalSeconds = (days * 86400) + (hours * 3600) + (minutes * 60) + seconds;
      initialTotalSeconds = totalSeconds;
      updateTimerDisplay();
      radialProgress.style.display = 'none';
      initialIcon.style.display = 'block';
      completedIcon.style.display = 'none';
    }

    startBtn.addEventListener('click', () => {
      if (!isRunning) {
        const days = parseInt(inputDays.value) || 0;
        const hours = parseInt(inputHours.value) || 0;
        const minutes = parseInt(inputMinutes.value) || 0;
        const seconds = parseInt(inputSeconds.value) || 0;
        totalSeconds = (days * 86400) + (hours * 3600) + (minutes * 60) + seconds;
        initialTotalSeconds = totalSeconds;
        updateTimerDisplay();
        startTimer();
      }
    });
    pauseBtn.addEventListener('click', pauseTimer);
    resetBtn.addEventListener('click', resetTimer);

    // Theme controller
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('change', () => {
      if (themeToggle.checked) {
        document.documentElement.setAttribute('data-theme', 'synthwave');
      } else {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    });

    function toggleMenu() {
      const menu = document.getElementById('menu');
      menu.classList.toggle('hidden');
    }

    function showPage(page) {
      const currentExperiment = document.getElementById('currentExperiment');
      const pastExperiments = document.getElementById('pastExperiments');
      if (page === 'currentExperiment') {
        currentExperiment.classList.remove('hidden');
        pastExperiments.classList.add('hidden');
        pageTitle.textContent = 'Current Experiment';
      } else if (page === 'pastExperiments') {
        currentExperiment.classList.add('hidden');
        pastExperiments.classList.remove('hidden');
        pageTitle.textContent = 'Past Experiments';
      }
      toggleMenu();
    }

    resetTimer(); // Initialize timer display
  </script>
</body>
</html>
